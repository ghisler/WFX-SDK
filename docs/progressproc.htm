<HTML><HEAD>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
	
	<TITLE>ProgressProc</TITLE>
	
	<META NAME="AUTHOR" CONTENT="Copyright ©2002-2019 Christian Ghisler">
	<META NAME="GENERATOR" CONTENT="HelpScribble 7.8.0">
<link href="ie.css" type="text/css" rel="stylesheet">
<!--[if gte IE 5]>
<style type="text/css">@import url(ie5+.css);</style>
<![endif]-->
</HEAD>
<BODY>
<div class="p1"><B>ProgressProc</B></div>
<div class="p2">ProgressProc is a callback function, which the plugin can call to show copy progress. The address of this callback function is received through the <A HREF="fsinit.htm">FsInit</A>() function when the plugin is loaded.</div>
<div class="p2">&nbsp;</div>
<div class="p2"><B>Declaration:</B></div>
<div class="p8">&nbsp;</div>
<div class="p8">int __stdcall ProgressProc(int PluginNr, char* SourceName, char* TargetName, int PercentDone);</div>
<div class="p2">&nbsp;</div>
<div class="p2"><B>Description of parameters:</B></div>
<div class="p2">&nbsp;</div>
<div class="p9"><span class="s3">PluginNr  </span>Here the plugin needs to pass the plugin number received through the <A HREF="fsinit.htm">FsInit</A>() function.</div>
<div class="p9">&nbsp;</div>
<div class="p9"><span class="s3">SourceName  </span>Name of the source file being copied. Depending on the direction of the operation (Get, Put), this may be a local file name of a name in the plugin file system.</div>
<div class="p9">&nbsp;</div>
<div class="p9"><span class="s3">TargetName  </span>Name to which the file is copied.</div>
<div class="p9">&nbsp;</div>
<div class="p9"><span class="s3">PercentDone  </span>Percentage of THIS file being copied. Total Commander automatically shows a second percent bar if possible when multiple files are copied.</div>
<div class="p9">&nbsp;</div>
<div class="p9"><B>Return value:</B></div>
<div class="p2">&nbsp;</div>
<div class="p2">Total Commander returns 1 if the user wants to abort copying, and 0 if the operation can continue.</div>
<div class="p2">&nbsp;</div>
<div class="p2"><B>Important note:</B></div>
<div class="p2">&nbsp;</div>
<div class="p2">You should call this function at least twice in the copy functions <A HREF="fsgetfile.htm">FsGetFile</A>(), <A HREF="fsputfile.htm">FsPutFile</A>() and <A HREF="fsrenmovfile.htm">FsRenMovFile</A>(), at the beginning and at the end. If you can't determine the progress, call it with 0% at the beginning and 100% at the end.</div>
<div class="p2">&nbsp;</div>
<div class="p2">New in 1.3: During the FsFindFirst/FsFindNext/FsFindClose loop, the plugin may now call the ProgressProc to make a progess dialog appear. This is useful for very slow connections. Don't call ProgressProc for fast connections! The progress dialog will only be shown for normal dir changes, not for compound operations like get/put. The calls to ProgressProc will also be ignored during the first 5 seconds, so the user isn't bothered with a progress dialog on every dir change.</div>
<div class="p2">
</div>
</BODY></HTML>
